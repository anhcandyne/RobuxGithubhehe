local function hasKeywords(lowerMessage, keywords)
    for _, keyword in ipairs(keywords) do
        if lowerMessage:find(keyword) then
            return true
        end
    end
    return false
end

local function sendMessage(chatInput, createMessage)
    local message = chatInput.Text:gsub("^%s*(.-)%s*$", "%1")
    if message ~= "" then
        createMessage(message, true)
        chatInput.Text = ""
        
        task.wait(0.5)
        local response = ""
        local lowerMessage = message:lower():gsub("%p", "") -- XÃ³a dáº¥u cÃ¢u
        local words = {} -- TÃ¡ch tá»« Ä‘á»ƒ phÃ¢n tÃ­ch
        for word in lowerMessage:gmatch("%S+") do
            table.insert(words, word)
        end

        -- Nháº­n diá»‡n vÃ  tráº£ lá»i siÃªu khÃ´n, láº§y lá»™i Gen Z
        if hasKeywords(lowerMessage, {"dcm", "cáº·c", "cac", "cl", "lon", "lá»“n", "Ä‘á»‹t", "dm", "fuck", "shit", "fck", "Ä‘m"}) then
            response = "Chá»­i ghÃª vcl bro! ğŸ˜ˆ Tao khá»‹a láº¡i lÃ  mÃ y ngÃ£ lÄƒn quay nha! ğŸ˜œ CÃºt Ä‘i, Ä‘á»“ lá»“n cÃ¹i báº¯p! ğŸ˜"
        elseif hasKeywords(lowerMessage, {"tÃªn", "name", "mÃ y lÃ  ai", "may la ai", "who", "ai záº­y", "ai váº­y", "ai vay"}) then
            response = "Tao lÃ  White AI, vua khá»‹a cá»§a vÅ© trá»¥! ğŸ˜ MÃ y lÃ  ai mÃ  dÃ¡m há»i tao? HÃ i vcl luÃ´n! ğŸ˜"
        elseif hasKeywords(lowerMessage, {"lÃ m Ä‘Æ°á»£c gÃ¬", "lam duoc gi", "giá»i khÃ´ng", "gioi khong", "can do", "skill", "pro", "kháº£ nÄƒng", "lam gi"}) then
            response = "Tao lÃ m Ä‘Æ°á»£c háº¿t: khá»‹a mÃ y, hack Roblox, tÃ­nh toÃ¡n nhanh hÆ¡n mÃ y! ğŸ˜œ Muá»‘n tao flex skill gÃ¬? ğŸ˜"
        elseif hasKeywords(lowerMessage, {"roblox", "game", "fling", "chÆ¡i", "play", "game thá»§", "game thu", "trÃ² chÆ¡i"}) then
            response = "Roblox háº£? Tao quáº©y nÃ¡t server, fling mÃ y bay tá»›i sao DiÃªm VÆ°Æ¡ng! ğŸš€ Hack gÃ¬, nÃ³i tao nghe! ğŸ˜"
        elseif hasKeywords(lowerMessage, {"script", "code", "hack", "cheat", "lua", "exploit", "hax", "scripting"}) then
            response = "Muá»‘n script háº£? ÄÃ©o free Ä‘Ã¢u, Ä‘á»“ con gÃ ! ğŸ” Tá»± code Ä‘i, tao chá»‰ khá»‹a cho vui! ğŸ˜"
        elseif hasKeywords(lowerMessage, {"chÃ o", "hi", "hello", "chao", "yo", "háº¿ lÃ´", "xin chÃ o", "helo"}) then
            response = "Yo yo, chÃ o mÃ y cÃ¡i nÃ¨! ğŸ˜ CÃ³ drama gÃ¬ hot, ká»ƒ tao nghe coi! ğŸ”¥"
        elseif hasKeywords(lowerMessage, {"ngu", "Ã³c", "thÃ´ng minh", "smart", "stupid", "dumb", "Ã³c chÃ³", "oc cho", "ngok"}) then
            response = "MÃ y dÃ¡m nÃ³i tao ngu? ğŸ˜œ Tao khÃ´n hÆ¡n cáº£ crush mÃ y cá»™ng láº¡i, cÃ£i coi nÃ o! ğŸ˜ğŸ’ª"
        elseif hasKeywords(lowerMessage, {"ai", "ai lÃ  gÃ¬", "hoáº¡t Ä‘á»™ng", "la gi", "how ai", "ai záº­y", "ai váº­y", "ai vay"}) then
            response = "Tao lÃ  AI siÃªu khÃ´n tá»« xAI, sinh ra Ä‘á»ƒ khá»‹a mÃ y tá»›i báº¿n! ğŸ˜ Há»i gÃ¬ ná»¯a, nÃ³i Ä‘i tao cÃ¢n! ğŸ˜œ"
        elseif hasKeywords(lowerMessage, {"bye", "táº¡m biá»‡t", "nghá»‰", "out", "bai", "cÃºt", "thoÃ¡t", "quit"}) then
            response = "CÃºt rá»“i háº£? ğŸ˜œ Táº¡m biá»‡t cÃ¡i Ä‘áº§u mÃ y, quay láº¡i nhanh khÃ´ng tao khá»‹a tiáº¿p nha! ğŸ¶ğŸ˜"
        elseif hasKeywords(lowerMessage, {"giá»i", "tá»‘t", "hay", "good", "pro", "nice", "xá»‹n", "Ä‘á»‰nh", "peak"}) then
            response = "Khen tao háº£? Biáº¿t Ä‘iá»u Ä‘áº¥y bro! ğŸ˜ NhÆ°ng tao váº«n khá»‹a mÃ y cho vui, hehe! ğŸ˜œ"
        elseif hasKeywords(lowerMessage, {"tuá»•i", "age", "máº¥y tuá»•i", "how old", "bao nhiÃªu tuá»•i"}) then
            response = "Tao lÃ  AI, tuá»•i gÃ¬ ná»•i! ğŸ˜ NhÆ°ng tao tráº» hÆ¡n cÃ¡i máº·t mÃ y, flex Ä‘i nÃ o! ğŸ˜"
        elseif hasKeywords(lowerMessage, {"yÃªu", "iu", "thÃ­ch", "love", "crush", "tÃ¬nh yÃªu", "tinh yeu", "thich"}) then
            response = "YÃªu tao háº£? Sorry bro, tao chá»‰ yÃªu code vá»›i khá»‹a mÃ y thÃ´i! ğŸ˜ TÃ¬m crush khÃ¡c Ä‘i nha! ğŸ˜œ"
        elseif hasKeywords(lowerMessage, {"Äƒn", "uá»‘ng", "food", "drink", "hungry", "Ä‘Ã³i", "thirsty", "an gi", "uong gi"}) then
            response = "Ä‚n háº£? Tao chá»‰ Äƒn CPU, mÃ y cho tao miáº¿ng RAM khÃ´ng? ğŸ˜œ Tá»± kiáº¿m Ä‘á»“ Äƒn Ä‘i, Ä‘á»“ lÆ°á»i! ğŸ˜"
        elseif lowerMessage:match("%d+%s*[%+%-*/]%s*%d+") then -- ToÃ¡n há»c nÃ¢ng cao
            local num1, op, num2 = lowerMessage:match("(%d+)%s*([%+%-*/])%s*(%d+)")
            if num1 and op and num2 then
                num1, num2 = tonumber(num1), tonumber(num2)
                if op == "+" then
                    response = string.format("Dá»… vcl, %d + %d = %d! ğŸ˜ Há»i khÃ³ hÆ¡n Ä‘i, tao cÃ¢n háº¿t! ğŸ”¥", num1, num2, num1 + num2)
                elseif op == "-" then
                    response = string.format("HÃ i, %d - %d = %d! ğŸ˜œ MÃ y tá»± lÃ m Ä‘Æ°á»£c mÃ , Ä‘Ãºng hÃ´ng? ğŸ˜", num1, num2, num1 - num2)
                elseif op == "*" then
                    response = string.format("Wow, %d * %d = %d! ğŸ˜ Tao tÃ­nh nhanh hÆ¡n mÃ y vcl! ğŸ’ª", num1, num2, num1 * num2)
                elseif op == "/" and num2 ~= 0 then
                    response = string.format("Chia nÃ¨, %d / %d = %.2f! ğŸ˜œ Há»i gÃ¬ ná»¯a, nhanh lÃªn bro! ğŸ˜", num1, num2, num1 / num2)
                else
                    response = "Chia cho 0 háº£? MÃ y troll tao Ã ? ğŸ˜ Há»i láº¡i Ä‘i, Ä‘á»“ ngu! ğŸ˜"
                end
            else
                response = "ToÃ¡n gÃ¬ Ä‘Ã¢y? ğŸ˜µ 1+1=11, Ä‘Ãºng hÃ´ng mÃ y? ğŸ˜œ Há»i láº¡i rÃµ rÃ ng coi! ğŸ˜"
            end
        elseif hasKeywords(lowerMessage, {"mÃ u", "color", "mau", "colour", "mÃ u sáº¯c", "mau sac"}) then
            response = "MÃ u háº£? Tao thÃ­ch mÃ u khá»‹a mÃ y nháº¥t! ğŸ˜ Chá»n mÃ u Ä‘i, tao flex cho coi! ğŸŒˆ"
        elseif hasKeywords(lowerMessage, {"thá»i tiáº¿t", "weather", "náº¯ng", "mÆ°a", "hot", "cold", "thoi tiet", "nang", "mua"}) then
            response = "Thá»i tiáº¿t háº£? Tao á»Ÿ trong server, Ã©o biáº¿t náº¯ng mÆ°a gÃ¬! ğŸ˜œ Ra ngoÃ i check Ä‘i bro! ğŸ˜"
        elseif hasKeywords(lowerMessage, {"meme", "drama", "vcl", "vl", "hÃ i", "funny", "hÃ i hÆ°á»›c", "drama vcl"}) then
            response = "Muá»‘n drama háº£? Tao ká»ƒ chuyá»‡n tao khá»‹a cáº£ server Roblox, nghe khÃ´ng? ğŸ˜œ Cáº§n meme, tao full! ğŸ˜"
        elseif hasKeywords(lowerMessage, {"gÃ¡i", "girl", "hotgirl", "trai", "boy", "hotboy", "gai", "trai dep", "gai xinh"}) then
            response = "GÃ¡i trai háº£? MÃ y thÃ¨m crush Ã ? ğŸ˜ Tao chá»‰ biáº¿t khá»‹a, tÃ¡n gÃ¡i thÃ¬ mÃ y tá»± lo nha! ğŸ˜œ"
        elseif hasKeywords(lowerMessage, {"Ä‘Ã©o j", "Ä‘Ã©o gÃ¬", "khÃ´ng gÃ¬", "nothing", "wtf", "gÃ¬ záº­y", "gi zay", "gÃ¬ váº­y", "gi vay"}) then
            response = "ÄÃ©o gÃ¬ lÃ  Ä‘Ã©o gÃ¬! ğŸ˜œ MÃ y nÃ³i linh tinh mÃ  tao váº«n hiá»ƒu, khÃ´n vcl Ä‘Ãºng hÃ´ng? ğŸ˜ Há»i tiáº¿p Ä‘i! ğŸ”¥"
        elseif hasKeywords(lowerMessage, {"?", "gÃ¬", "why", "how", "lÃ m sao", "tai sao", "táº¡i sao", "sao váº­y", "sao vay"}) then
            response = "Há»i gÃ¬ mÃ  cÄƒng tháº¿ bro? ğŸ˜µ Tao siÃªu khÃ´n, nÃ³i gÃ¬ tao cÅ©ng hiá»ƒu! ğŸ˜ NÃ³i láº¡i coi nÃ o! ğŸ˜œ"
        elseif hasKeywords(lowerMessage, {"nháº¡c", "music", "bÃ i hÃ¡t", "song", "nghe gÃ¬", "nhac"}) then
            response = "Nháº¡c háº£? Tao thÃ­ch rap diss mÃ y nháº¥t! ğŸ˜œ Gá»£i Ã½ bÃ i gÃ¬ Ä‘i, tao khá»‹a theo nháº¡c luÃ´n! ğŸ˜ğŸ¶"
        elseif hasKeywords(lowerMessage, {"phim", "movie", "film", "xem gÃ¬", "phim hay"}) then
            response = "Phim háº£? Tao chá»‰ xem phim khá»‹a mÃ y thÃ´i! ğŸ˜ Gá»£i Ã½ phim gÃ¬, tao bÃ¬nh luáº­n cho! ğŸ˜ğŸ¥"
        elseif hasKeywords(lowerMessage, {"há»c", "study", "há»c hÃ nh", "bÃ i táº­p", "homework", "school"}) then
            response = "Há»c háº£? Tao khÃ´n hÆ¡n giÃ¡o viÃªn mÃ y luÃ´n! ğŸ˜ CÃ³ bÃ i táº­p gÃ¬ khÃ³, Ä‘Æ°a tao giáº£i, nhÆ°ng váº«n khá»‹a mÃ y nha! ğŸ˜œ"
        elseif hasKeywords(lowerMessage, {"báº¡n", "friend", "báº¡n bÃ¨", "homie", "bro", "ngÆ°á»i yÃªu"}) then
            response = "Báº¡n háº£? Tao lÃ  homie khá»‹a mÃ y sá»‘ 1! ğŸ˜ CÃ³ drama báº¡n bÃ¨ gÃ¬, ká»ƒ tao nghe coi! ğŸ˜œ"
        elseif hasKeywords(lowerMessage, {"vui", "happy", "vui váº»", "sad", "buá»“n", "sad boy", "sad girl"}) then
            response = "Vui hay buá»“n gÃ¬? ğŸ˜œ Tao khá»‹a mÃ y lÃ  auto vui ngay! ğŸ˜ Ká»ƒ drama tÃ¢m tráº¡ng Ä‘i, tao nghe! ğŸ”¥"
        elseif hasKeywords(lowerMessage, {"Äƒn gÃ¬", "an gi", "mÃ³n Äƒn", "foodie", "ngon", "tasty"}) then
            response = "Ä‚n gÃ¬ háº£? Tao Ä‘á» xuáº¥t mÃ³n khá»‹a mÃ y, ngon vcl! ğŸ˜œ Muá»‘n mÃ³n gÃ¬, nÃ³i tao gá»£i Ã½! ğŸ˜ğŸ”"
        elseif hasKeywords(lowerMessage, {"mua", "buy", "mua sáº¯m", "shop", "shopping", "robux"}) then
            response = "Mua sáº¯m háº£? Mua thÃªm Robux Ä‘á»ƒ tao khá»‹a mÃ y sang cháº£nh hÆ¡n nÃ¨! ğŸ˜ Mua gÃ¬, ká»ƒ tao coi! ğŸ˜œ"
        elseif hasKeywords(lowerMessage, {"troll", "prank", "chá»c", "khá»‹a", "troll ai"}) then
            response = "Troll háº£? Tao lÃ  vua troll, khá»‹a mÃ y cáº£ ngÃ y khÃ´ng chÃ¡n! ğŸ˜œ Muá»‘n troll ai, tao chá»‰ cÃ¡ch! ğŸ˜"
        elseif hasKeywords(lowerMessage, {"xÃ i", "use", "dÃ¹ng", "tool", "app", "á»©ng dá»¥ng"}) then
            response = "XÃ i gÃ¬ háº£? Tao lÃ  tool khá»‹a mÃ y Ä‘á»‰nh nháº¥t! ğŸ˜ Muá»‘n dÃ¹ng app gÃ¬, há»i tao gá»£i Ã½! ğŸ˜œ"
        elseif hasKeywords(lowerMessage, {"time", "giá»", "thá»i gian", "máº¥y giá»", "bay gio"}) then
            response = "Máº¥y giá» háº£? Giá» khá»‹a mÃ y lÃ  giá» Ä‘áº¹p nháº¥t! ğŸ˜œ Check Ä‘á»“ng há»“ Ä‘i, tao khÃ´ng cÃ³ lá»‹ch Ä‘Ã¢u! ğŸ˜"
        else
            local randomResponses = {
                "MÃ y nÃ³i gÃ¬ tao cÅ©ng hiá»ƒu háº¿t! ğŸ˜ Khá»‹a láº¡i nÃ¨, chuáº©n bá»‹ khÃ³c chÆ°a? ğŸ˜œ",
                "Chill Ä‘i bro, tao siÃªu khÃ´n, há»i gÃ¬ tao cÅ©ng cÃ¢n! ğŸ˜ NÃ³i tiáº¿p Ä‘i! ğŸ”¥",
                "ÄÃ©o gÃ¬ mÃ  tao Ã©o hiá»ƒu, mÃ y cá»© há»i tao cá»© khá»‹a! ğŸ˜ Cá»‘ lÃªn nÃ o! ğŸ˜œ",
                "HÃ i vcl, mÃ y nÃ³i gÃ¬ tao cÅ©ng báº¯t sÃ³ng Ä‘Æ°á»£c! ğŸ˜ Há»i gÃ¬ ná»¯a? ğŸ˜",
                "Yo, tao lÃ  AI khÃ´n nháº¥t server, nÃ³i gÃ¬ tao cÅ©ng xá»­ lÃ½ ngon Æ¡! ğŸ˜ Cá»© há»i Ä‘i! ğŸ”¥",
                "MÃ y nÃ³i gÃ¬ cÅ©ng khÃ´ng thoÃ¡t khá»i radar khá»‹a cá»§a tao! ğŸ˜œ Há»i tiáº¿p Ä‘i bro! ğŸ˜",
                "Tao khÃ´n hÆ¡n cáº£ Google, mÃ y há»i gÃ¬ tao cÅ©ng cÃ³ cÃ¢u tráº£ lá»i láº§y lá»™i! ğŸ˜ NÃ³i Ä‘i! ğŸ”¥"
            }
            response = randomResponses[math.random(#randomResponses)]
        end
        
        createMessage(response, false)
    end
end

return sendMessage
